<!-- FIXED LANGUAGE SELECTION FOR MOBILE -->
<!-- Replace your language modal section with this code -->

<div id="langModal" class="modal-overlay">
<div class="modal">
<h2>ğŸ¥ Welcome!</h2>
<p>Choose <strong>2 languages</strong> to learn medical vocabulary</p>
<div class="lang-select">
<div class="lang-options">
<div class="lang-option" id="opt-english" data-lang="english">
<input type="checkbox" id="lang-english" disabled>
<label><span class="flag">ğŸ‡¬ğŸ‡§</span> English</label>
</div>
<div class="lang-option" id="opt-finnish" data-lang="finnish">
<input type="checkbox" id="lang-finnish" disabled>
<label><span class="flag">ğŸ‡«ğŸ‡®</span> Finnish (Suomi)</label>
</div>
<div class="lang-option" id="opt-tagalog" data-lang="tagalog">
<input type="checkbox" id="lang-tagalog" disabled>
<label><span class="flag">ğŸ‡µğŸ‡­</span> Tagalog</label>
</div>
</div>
<p class="error-msg" id="langError">Please select exactly 2 languages!</p>
</div>
<button class="modal-btn" id="startBtn">Start Learning!</button>
</div>
</div>

<script>
// FIXED LANGUAGE SELECTION JAVASCRIPT
let selectedLangs = [];

// Initialize language selection
document.addEventListener('DOMContentLoaded', function() {
  // Add click handlers to each language option
  document.querySelectorAll('.lang-option').forEach(option => {
    option.addEventListener('click', function(e) {
      e.preventDefault();
      e.stopPropagation();
      
      const lang = this.getAttribute('data-lang');
      const checkbox = document.getElementById('lang-' + lang);
      
      if (this.classList.contains('selected')) {
        // Deselect
        this.classList.remove('selected');
        checkbox.checked = false;
        selectedLangs = selectedLangs.filter(l => l !== lang);
      } else {
        // Select (if less than 2 already selected)
        if (selectedLangs.length < 2) {
          this.classList.add('selected');
          checkbox.checked = true;
          selectedLangs.push(lang);
        }
      }
      
      // Hide error message when user makes selection
      document.getElementById('langError').style.display = 'none';
      
      console.log('Selected languages:', selectedLangs);
    });
    
    // Also add touch event for better mobile support
    option.addEventListener('touchend', function(e) {
      e.preventDefault();
      this.click();
    });
  });
  
  // Start button handler
  document.getElementById('startBtn').addEventListener('click', function(e) {
    e.preventDefault();
    
    if (selectedLangs.length !== 2) {
      document.getElementById('langError').style.display = 'block';
      return;
    }
    
    console.log('Starting game with languages:', selectedLangs);
    document.getElementById('langModal').style.display = 'none';
    document.getElementById('instructModal').style.display = 'flex';
  });
});

// Instructions close handler
function closeInstructions() {
  document.getElementById('instructModal').style.display = 'none';
  if (typeof draw === 'function') {
    draw();
  }
}
</script>
